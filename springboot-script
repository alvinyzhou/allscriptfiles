node("master"){
    stage("checkout"){
        checkout([$class: 'GitSCM', branches: [[name: '*/master']], doGenerateSubmoduleConfigurations: false, extensions: [], submoduleCfg: [], userRemoteConfigs: [[credentialsId: 'githubProfile', url: 'git@github.com:alvinyzhou/alvinSpBoot.git']]])   
    }

    stage("mvn build"){
        echo "return status bat start"
        //bat returnStatus: true, script: 'mvn clean install '
        sh 'java -version'
        sh 'echo %JAVA_HOME%'
        sh 'mvn clean install'
        echo "return status bat end"
        
        //echo "simple bat start"
        //bat 'mvn clean install '
        //echo "simple bat end"
    }
    
    
   stage("deploy to Tomcat"){
        echo "Current path"
        sh "pwd"
        sh "sudo -i |Digital@2018"
        sh "./deploy.sh"
   }
}
